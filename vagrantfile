# DEFINITION - VAGRANT
Vagrant.require_version ">= 2.1.0"
Vagrant.configure("2") do |co|

# DEFINITION - CONFIGURATION
  co.vm.box = "ubuntu/xenial64"
  co.vm.box_check_update = false
  co.vm.box_version = "20180531.0.0"
  co.vm.hostname = "devbox"
  co.vm.post_up_message = \
  "ready...set...go:\n" \
  "1) setup your aws profile -> 'aws configure' or 'aws configure --profile PROFILE_NAME'\n" \
  "2) setup your az profile -> 'az login' or 'az login --service-principal -u SP_NAME -p PASSWORD -- TENANT'\n" \
  "3) goto your project directory -> 'cd /vagrant'"
  co.vm.provision "shell", path: "vagrantup.sh"
  co.vm.synced_folder ".", "/vagrant"

# DEFINITION - NETWORK
  co.vm.network "forwarded_port", guest: 9000, host: 9000, host_ip: "127.0.0.1" # interface-web
  co.vm.network "forwarded_port", guest: 9010, host: 9010, host_ip: "127.0.0.1" # housing-selection
  co.vm.network "forwarded_port", guest: 9020, host: 9020, host_ip: "127.0.0.1" # housing-forecast
  co.vm.network "forwarded_port", guest: 9030, host: 9030, host_ip: "127.0.0.1" # servicehub-room
  co.vm.network "forwarded_port", guest: 9040, host: 9040, host_ip: "127.0.0.1" # servicehub-batch
  co.vm.network "forwarded_port", guest: 9050, host: 9050, host_ip: "127.0.0.1" # servicehub-user

# DEFINITION - PROVIDER
  co.vm.provider "virtualbox" do |vb|
    vb.gui = false
    vb.name = "devbox-#{Time.now.to_i}"
    vb.memory = 2048
  end
end
